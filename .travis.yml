dist: xenial
language: python
python:
- '3.6'
install:
- sudo apt-get install -qq python-dev libxml2-dev libxmlsec1-dev
before_script:
- pip install -e .
- pip install pycodestyle
- pip install coverage
- pip install coveralls
- cp travis-ci/manage.py manage.py
script:
- pycodestyle uw_saml/
- python -m compileall uw_saml/
- coverage run --source=uw_saml/ manage.py test uw_saml
after_success:
- coveralls
before_deploy:
- find uw_saml/ -name \*.pyc -exec rm {} \;
- echo $TRAVIS_TAG > uw_saml/VERSION
- pip install pyopenssl
deploy:
  provider: pypi
  user: uw-it-aca
  skip_cleanup: true
  password:
    secure: mxipJ7zNX+i5C6B4cCKj8HqqMdnCcniwZzeP4I5swm47z0JXxcYR2L0SWIcnvJY/qfeGNJVL2owgoxsYOayC97WM7LY2vf6jZYnIoBKHOuPnI2RmOxIKrO6MJQN49b4DBqWshzUUThC2N6tAqP7TALBTqRnNFgfjPLnA39d235Ru5u0a2OhwFDahJvuVxHiS0Xqg4qs3QqZd4IyqFNnVcfzas0/KvKQwHx+o6ueCGOas36z2dA52vULHH/mjUpOHMQkfwSuITSWib4qJo/X74T1K95Z1HjIp8mgEzOiMTz8RXt+hJ7gsFBjyAdchfH9AY3bwQ72CR3/WG9JN4Heq2uxT2aB+StoEtjtowSCegSR9MdavaMpfZREAisNHy4ej53ba+zbLUdGSFjQRVRL6fIJLJ2CcXuRYubTYoQZSgmX7H1XEGd6FDA0j8gnSfSFcIiHvhg9Qo3XemMB3U49mDtoZyFOPmxFpvcfIAz5/+WkkbSsScYIdhafxq9jDnQfsWUtu0/lBg1bqrbsa1y9jlYd+vFzsVjSBgOrAQa9SLbTyCE9lre2WrrYX0iTEGRb9EKYG/rfGqeL7iMKUSPChVHewZiIO5jHaVq129o9IPPO5VKKWWSs6m0SWW55GT6sMZqT89p7VD0/oQp7GS6splDXa0iF9WezegHHDOKIkyjs=
  on:
    tags: true
    python: '3.6'
